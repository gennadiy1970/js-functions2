<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Closure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" />
    <link rel="stylesheet" href="../css/common.css">
</head>
<body>
    <div class="wrapper">
        <h2>Closure / Замыкание</h2>
        <article>
            <h4>Функция - это параметры и текст</h4>
            <pre><kbd>const add = new Function('a', 'b', 'return a + b');
console.log(add(2, 3))  <span class="comment">// 5</span>                
            </kbd></pre>
        <p>Тему констркуторов мы изучем позднее. Сейчас важно продемонстрировать тот факт, что выполнение функции - это результат обработки строки с 
                параметрами и текстом самой функции.
        </p>
        <p class="attantion">PS Не используйте new Function () в своих работах - это крайне медленно и не безопасно.</p>
        </article>
        <article>
            <h4>Переменной присвоим текст функции</h4>
            <p>Чтобы получить текст функции надо передать переменной имя функции без вызова.</p>
            <pre><kbd>function mult (a, b) {
    return a * b;                
}

const foo = mult;   <span class="comment">// нет ()</span>

console.log(foo);  <span class="comment"> // function mult (a, b) {
        return a * b;                
    } 
    const foo = mult;
    console.log(foo);</span>
</kbd></pre>
        </article>
        <article>
            <h4>Scope / Область видимости</h4>
            <p>Переменные внутри функции не видны из вне, но видны изнутри.</p>
            <pre><kbd>const common = "Видима всем в window";

function Foo () {
    const fooScope = "Видима только тем, кто внутри Foo";

    function Bar () {
        const barScope = "Видима только тем, кто внутри Bar";
    }
}
            </kbd></pre>
        </article>
        <article>
            <h4>Как получить значение переменной из функции</h4>
            <p>Использовать return</p>
            <pre><kbd>const common = "Видима всем в window";

function Foo () {
    const fooScope = "Видима только тем, кто внутри Foo";
            
    function Bar () {
        const barScope = "Видима только тем, кто внутри Bar";
        return barScope + '\n' + fooScope + '\n' + common;
    }
    <span class="comment">// такой return вернет только текст функции Bar </span>
    return Bar;
}      

<span class="comment">// такое присвоение создать ССЫЛКУ на текст Bar </span>
const linker = Foo()

<span class="comment">/* такой вызов выполнить текст Bar 
    со всеми переменными из scope Bar */ </span>
linker();<span class="comment">
/*
Видима только тем, кто внутри Bar
Видима только тем, кто внутри Foo
Видима всем в window
*/
</span>
            </kbd></pre>      
        </article>
        <article>
            <h4>Пример</h4>
            <p><a href="https://codepen.io/Gorbulin/pen/jKxXjB">codepen</a></p>
        </article>
    </div>

    <a href="../index.html" class="back">back</a>
</body>
</html>